---
stoplight-id: 07tg7u7u43fbr
---

# Cloud API for eBike product data
_Cloud API for eBike product data_ currently offers the _Supply Chain Data API_, which enables OEMs to exchange supply chain data with Bosch to gain insights into market dynamics.

<!-- theme: info -->

> #### Please note
>
> No rider login required for _Supply Chain Data API_.
## Getting started

### Prerequisites
In order to use the _Supply Chain Data API_, please get in touch with your responsible Bosch contact first to request an OAuth client, which represents your requesting client application.

### How does it work?

#### Client authentication
In order to make successful API requests to _Supply Chain Data API_ you need a valid OpenID Connect Access Token (JWT), which must be obtained through our OAuth server using the `Client Credentials OAuth 2 Flow`. Refer to security scheme `OAuth 2.0 (Client)` on each API for details.

#### Data Flow
The data flow is based on a quid pro quo framework agreement between Bosch and the OEM, where both partners exchange data of similar value.

The first step is to provide OEM bike production data (by sending Manufacturing Logs generated by the Bosch Diagnosis Tool 3 (BDP), when configuring a bike during its assembly) and OEM outbound logistic data via the corresponding `Manufacturer Logs` and `Bike Shipments` REST resources of the _Supply Chain Data API_.

When the system receives data for a bike, it aggregates and enriches it asynchronously with the available information collected through the Smart System. 
More specifically it adds:

- The point in time when __the BDP was first connected__ to the bike.
- When __the bike was paired__ with the eBike Flow app.
- When __the first activity was recorded__. 

The Smart System information is added over time while it is collected from the usage of the bike over its lifecycle.

<!-- theme: info -->
>
> The enrichment of sent production and shipment data is done asynchronously. It may take up to 24 hours (or longer depending on system utilization) until the corresponding traceabilities can be queried via the _Supply Chain Data API_.
> 
The enriched information is served by the `Bike Traceabilities` REST resource which can be queried by the OEM's IT.
  ```mermaid
      flowchart LR      
      oem["OEM IT"] --> api["Supply Chain Data API<br><br>Manufacturing Logs<br>Bike Shipments<br>#9729;"];          
      api --> api2["Supply Chain Data API<br><br>Bike Traceabilitites<br>#9729;"];
      api2 --> oem2[OEM IT];
  ```

#### Implementation Example
In the following an example implementation is sketched. In the depicted case production and shipment information is sent immediately (another option would be to send the data periodically, e.g. once per day).

 ```mermaid
    sequenceDiagram
        autonumber
        alt when bike is assembled
            OEM IT->>Supply Chain Data API: POST manufacturing log
            Supply Chain Data API->>OEM IT: 200
        end
        
        Supply Chain Data API-)Supply Chain Data API: add manufacturing information to bike traceability
        
        alt when bike is shipped
            OEM IT->>Supply Chain Data API: POST bike-shipments
            Supply Chain Data API->>OEM IT: 200
        end

        Supply Chain Data API-)Supply Chain Data API: add shipment information to bike traceability
        
        BDP-)Supply Chain Data API: report first BDP contact
        Supply Chain Data API-)Supply Chain Data API: add BDP contact to bike traceability

        eBike Flow app-)Supply Chain Data API: report first app pairing
        Supply Chain Data API-)Supply Chain Data API: add first app pairing to bike traceability

        eBike Flow app-)Supply Chain Data API: report recoding of first activity
        Supply Chain Data API-)Supply Chain Data API: add first activity to bike traceability
        
        OEM IT->>OEM IT: get the latest updatedAt timestamp of all stored bike traceabilities
        
        loop for all pages
            OEM IT->>Supply Chain Data API: GET bike-traceabilities [updatedAt=latestTimestamp]
            Supply Chain Data API->>OEM IT: bike traceabilities
            OEM IT->>OEM IT: store bike traceabilities
        end
 ```
| Seq. No.            | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|---------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1, 2, 3, 4, 5, 6    | The OEM IT sends a manufacturing log and afterwards, when the bike is to be delivered to a dealer, a bike shipment. Note that the processing is asynchronous, meaning after the response from the REST API it is not yet guaranteed that a corresponding bike traceability can be queried.                                                                                                                                                                                                       |
| 7, 8, 9, 10, 11, 12 | Whenever the corresponding event happens in the Smart System the bike traceability record is enriched accordingly.                                                                                                                                                                                                                                                                                                                                                                                     |
| 13                  | In this scenario it is assumed that there are already bike traceabilities stored at the OEM (e.g. in a database). Whenever a bike traceability is enriched, the `updatedAt` field is adapted accordingly with the time of the update (as described in the Open API specification of the _Supply Chain Data API_). In order to avoid to query all traceabilities on every request one can query only updated or new bike traceabilities by passing the _latest_ `updatedAt` timestamp of all stored items. |
| 14, 15, 16          | The OEM IT queries all updated or new bike traceabilities. If there are many this involves querying multiple pages. Every response is finally saved in a database.                                                                                                                                                                                                                                                                                                                                     |

#### Historical Data
When onboarding to the _Supply Chain Data API_ it is usually required to provide historical data in order to be able to conduct a meaningful data analysis on bike traceabilities.

Historical data can be provided via "batch upload" (all REST resources support arrays) via _Supply Chain Data API_.

<!-- theme: info -->
>
> Historical data should be provided as follows: Send all manufacturing log data first and then all bike shipments.
>

#### Updates of Manufacturing Logs / Bike Shipments
If a previously sent Manufacturing Log or Bike Shipment was erroneous and should be updated, the event can be re-sent by providing the same bike id (or drive unit serial and part number) but changes in the payload's other fields.

<!-- theme: info -->
>
> The event for a bike which was received latest by the _Supply Chain Data API_ will supersede all previously sent events.
>